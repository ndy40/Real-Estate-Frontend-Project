define(["../module.min"],function(e){"use strict";e.controller("FavouritesCtrl",["$scope","$rootScope","FavService","UserModel","$location",function(e,t,a,o,s){o.isLoggedIn||s.path("/sign/in"),e.favList={properties:[],status:!1,zeroList:!1},e.getFavourites=function(){o.isLoggedIn&&(null===a.propertyData?o.favourites.length>0?a.getFavourites(o.favourites).success(e.loadFavTable):(e.favList.status=!0,e.favList.zeroList=!0):e.loadFavTable(a.getCache()))},e.loadFavTable=function(t){e.favList.properties=t,e.favList.status=!0,e.favList.zeroList=!1,a.cache(t)},e.getFavourites(),e.removeFromFav=function(s){o.removeFav(s).success(function(){o.removeFavFE(s),a.clearCache(),e.getFavourites(),t.$broadcast("favUpdated")})},e.$on("favUpdated",function(){e.favUpdate=e.favUpdate?!1:!0})}])});