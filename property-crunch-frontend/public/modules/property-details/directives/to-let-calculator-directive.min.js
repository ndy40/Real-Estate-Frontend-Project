define(["../module.min"],function(t){"use strict";t.directive("pcToLetCalculator",function(){return{restrict:"E",templateUrl:"./modules/property-details/directives/to-let-calculator.html",scope:{purchasePrice:"=",rentalIncome:"="},link:function(t){t.toLet={mortgageLtv:.75,mortgageRate:.06,managementCost:0,maintenanceCost:0,refurbishment:0,otherCosts:0,monthlyMortgage:"",depositNeeded:"",stampDuty:"",totalPurchaseCost:"",monthlyProfitOrLoss:"",yearlyROI:""},t.calcStampDuty=function(){t.toLet.purchasePrice<=125e3?t.toLet.stampDuty=0:t.toLet.purchasePrice>125e3&&t.toLet.purchasePrice<=25e4?t.toLet.stampDuty=.02*(t.toLet.purchasePrice-125e3):t.toLet.purchasePrice>25e4&&t.toLet.purchasePrice<=925e3?t.toLet.stampDuty=.05*(t.toLet.purchasePrice-25e4)+2500:t.toLet.purchasePrice>925e3&&t.toLet.purchasePrice<=15e5?t.toLet.stampDuty=.1*(t.toLet.purchasePrice-925e3)+36250:t.toLet.purchasePrice>15e5&&(t.toLet.stampDuty=.12*(t.toLet.purchasePrice-15e5)+93750)},t.calculateToLetResults=function(){t.toLet.monthlyMortgage=t.toLet.purchasePrice*t.toLet.mortgageLtv*t.toLet.mortgageRate/12,t.toLet.depositNeeded=t.toLet.purchasePrice-t.toLet.purchasePrice*t.toLet.mortgageLtv,t.calcStampDuty(),t.toLet.totalPurchaseCost=t.toLet.depositNeeded+t.toLet.stampDuty+t.toLet.refurbishment+t.toLet.otherCosts,t.toLet.monthlyProfitOrLoss=t.toLet.estRentalIncome-t.toLet.monthlyMortgage-t.toLet.managementCost*t.toLet.estRentalIncome-t.toLet.maintenanceCost*t.toLet.estRentalIncome,t.toLet.yearlyROI=12*t.toLet.monthlyProfitOrLoss/t.toLet.totalPurchaseCost,t.toLetResults=!0},t.reCalculateToLetResults=function(){t.toLetResults=!1},t.$watch("purchasePrice",function(){t.toLet.purchasePrice=void 0===t.purchasePrice?0:t.purchasePrice}),t.$watch("rentalIncome",function(){t.toLet.estRentalIncome=void 0===t.rentalIncome?0:Math.round(t.rentalIncome*t.toLet.purchasePrice/100/12*100)/100})}}})});