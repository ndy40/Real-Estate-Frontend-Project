define(["../module.min"],function(t){"use strict";return t.service("SearchService",["$http","APPSRCHURL",function(t,e){var r=function(){this.keywords="",this.results={},this.count="",this.pager={pageNumber:1,resultsPerPage:10},this.filters={},this.filtersCache={typeList:"",yieldList:"",priceList:""},this.filtersQuery="",this.url=""};return r.prototype.cacheResults=function(t){this.results=t},r.prototype.getCache=function(){return this.results},r.prototype.clearCache=function(){this.results={}},r.prototype.cacheTypeList=function(t){this.filtersCache.typeList=t},r.prototype.cacheYieldList=function(t){this.filtersCache.yieldList=t},r.prototype.cachePriceList=function(t){this.filtersCache.priceList=t},r.prototype.getTypeListCache=function(){return this.filtersCache.typeList},r.prototype.getYieldListCache=function(){return this.filtersCache.yieldList},r.prototype.getPriceListCache=function(){return this.filtersCache.priceList},r.prototype.clearFilters=function(){this.filters={}},r.prototype.setKeyword=function(t){this.keywords=t},r.prototype.getKeywords=function(){return this.keywords},r.prototype.setCurrentPage=function(t){this.pager.pageNumber=t},r.prototype.getCurrentPage=function(){return this.pager.pageNumber},r.prototype.getResultsPerPageValue=function(){return this.pager.resultsPerPage},r.prototype.getTypeList=function(){var r=e.typeList;return t.get(r)},r.prototype.getYieldList=function(){var r=e.yieldList;return t.get(r)},r.prototype.getPriceList=function(){var r=e.priceList;return t.get(r)},r.prototype.setCurrentRooms=function(t){this.filters.rooms=t},r.prototype.setCurrentType=function(t){this.filters.type=t},r.prototype.setCurrentMaxPrice=function(t){this.filters.price_max=t},r.prototype.setCurrentMinPrice=function(t){this.filters.price_min=t},r.prototype.setCurrentYield=function(t){this.filters.minYield=t},r.prototype.setCurrentSortOrder=function(t){this.filters.sort=t},r.prototype.setCurrentResultsPerPage=function(t){this.filters.resultsPerPage=t,this.pager.resultsPerPage=t.value},r.prototype.getCurrentRooms=function(){return void 0!==this.filters.rooms?this.filters.rooms:"all"},r.prototype.getCurrentType=function(){return void 0!==this.filters.type?this.filters.type:{option:"All",value:-1}},r.prototype.getCurrentMaxPrice=function(){return void 0!==this.filters.price_max?this.filters.price_max:{option:"All",value:-1}},r.prototype.getCurrentMinPrice=function(){return void 0!==this.filters.price_min?this.filters.price_min:{option:"All",value:-1}},r.prototype.getCurrentYield=function(){return void 0!==this.filters.minYield?this.filters.minYield:{option:"All",value:-1}},r.prototype.getCurrentSortOrder=function(){return void 0!==this.filters.sort?this.filters.sort:{option:"Most Recent",value:"updated_at desc"}},r.prototype.getResultsPerPageObject=function(){return void 0!==this.filters.resultsPerPage?this.filters.resultsPerPage:{option:10,value:10}},r.prototype.setFiltersQuery=function(){this.filtersQuery="",void 0!==this.filters.rooms&&(this.filtersQuery+="&rooms_min="+this.filters.rooms),void 0!==this.filters.type&&(this.filtersQuery+="&type_id="+this.filters.type.value),void 0!==this.filters.price_max&&(this.filtersQuery+="&price_max="+this.filters.price_max.value),void 0!==this.filters.price_min&&(this.filtersQuery+="&price_min="+this.filters.price_min.value),void 0!==this.filters.sort&&(this.filtersQuery+="&sort="+this.filters.sort.value),void 0!==this.filters.minYield&&(this.filtersQuery+="&yield_min="+this.filters.minYield.value)},r.prototype.getFiltersQuery=function(){return this.filtersQuery},r.prototype.setUrl=function(){this.url=e.search+this.keywords+"/"+this.pager.pageNumber+"/"+this.pager.resultsPerPage+"?offer_type=Sale"},r.prototype.getResults=function(){return this.setFiltersQuery(),this.setUrl(),t.get(this.filtersQuery?this.url+this.filtersQuery:this.url)},r.prototype.testLocation=function(){return t.get(this.url)},new r}])});